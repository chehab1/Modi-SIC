  COPY start     1000
 FIRST   stl   RETADR
 CLOOP  jsub    RDREC
         lda   LENGTH
        comp     ZERO
         JEQ   ENDFIL
        JSUB    WRREC
           J    CLOOP
ENDFIL   LDA      EOF
         sta   BUFFER
         lda    THREE
         STA   LENGTH
        JSUB    WRREC
         LDL   RETADR
        RSUB         
   EOF  BYTE   C'EOF'
 THREE  WORD        3
  ZERO  WORD        0
RETADR  resw        1
LENGTH  RESW        1
BUFFER  resb     4096
 RDREC   ldx     ZERO
         LDA     ZERO
 RLOOP    TD    INPUT
         JEQ    RLOOP
          RD    INPUT
        COMP     ZERO
 WRREC   jeq     EXIT
        STCH BUFFER,X
         TIX   MAXLEN
         JLT    RLOOP
  EXIT   stx   LENGTH
        RSUB         
 INPUT  byte    X'F1'
MAXLEN  word     4096
         ldx       #3
  test   sio    WRREC