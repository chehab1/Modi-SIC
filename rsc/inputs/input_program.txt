05	COPY	start	1000	COPY FILE FROM INPUT TO OUTPUT
10	FIRST	stl	RETADR	SAVE RETURN ADDRESS
15	CLOOP	jsub	RDREC	READ INPUT RECORD
20		lda	LENGTH	TEST FOR EOF (LENGH = 0)
25		comp	ZERO	
30		JEQ	ENDFIL	EXIT IF EOF FOUND
35		JSUB	WRREC	WRITEOUTPUT RECORD
40		J	CLOOP	LOOP
45	ENDFIL	LDA	EOF	INSERT END OF FILE MAKER
50		sta	BUFFER
55		lda	THREE	SET LENGTH = 3
60		STA	LENGTH
65		JSUB	WRREC	WRITE EOF
70		LDL	RETADR	GET RETURN ADDRESS
75		RSUB		RETURN TO CALLER
80	EOF	BYTE	C'EOF'
85	THREE	WORD	3
90	ZERO	WORD	0
95	RETADR	resw	1
100	LENGTH	RESW	1
105	BUFFER	resb	4096	4096-BYTE BUFFER AREA
110	.
115	.	SUBROUTINE TO READ RECORD INTO BUFFER
120	.
125	RDREC	ldx	ZERO	CLEAR LOOP COUNTER
130		LDA	ZERO	CLEAR A TO ZERO
135	RLOOP	TD	INPUT	REST INPUT DEVICE
140		JEQ	RLOOP	LOOP UNTIL READY
145		RD	INPUT	READ CHARACTER INTO REGISTER A
150		COMP	ZERO	TEST FOR END OF RECORD (X'00')
155	WRREC	jeq	EXIT	EXIT LOOP IF EOR
160		STCH	BUFFER,X	STORE CHARACTER IN BUFFER
165		TIX	MAXLEN	LOOP UNLESS MAX LEN
170		JLT	RLOOP	HAS BEEN REACHED
175	EXIT	stx	LENGTH	SAVE RECORD LENGTH
180		RSUB		RETURN to caller
185	INPUT	byte	X'F1'	CODE FOR INPUT DEVICE
190	MAXLEN	word	4096
195	.
200		ldx	#3	TESTING IMMEDIATE INSTRUCTIONS
205	test	sio	WRREC	test format 1